(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af65b60c","chunk-2d0df842","chunk-2d20ed7a"],{"0857":function(e,t,a){"use strict";a("a0e0");var n=a("a013"),l=a("f425"),s=a("dad2"),r="toString",i=/./[r],o=function(e){a("e5ef")(RegExp.prototype,r,e,!0)};a("b6f1")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?o(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?l.call(e):void 0)}):i.name!=r&&o(function(){return i.call(this)})},"89f1":function(e,t,a){"use strict";a.r(t);var n,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.thisValue,callback:function(t){e.thisValue=t},expression:"thisValue"}},[a("v-card",[a("v-toolbar",{attrs:{id:"core-toolbar",app:"",color:"dark",prominent:""}},[a("div",{staticClass:"v-toolbar-title"},[a("v-toolbar-title",{staticClass:"white--text font-weight-light"},[e._v("新增管理员")])],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.thisValue=!1}}},[a("v-icon",[e._v("el-icon-close")])],1)],1)],1),a("v-card-text",[a("v-container",[a("div",{staticStyle:{height:"60px"}}),a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"登录账号",rules:[function(e){return!!e||"登录账号必填"}],required:"",placeholder:"输入4-12个字符",counter:12},model:{value:e.formData.admin_name,callback:function(t){e.$set(e.formData,"admin_name",t)},expression:"formData.admin_name"}}),a("v-text-field",{attrs:{label:"登录密码",rules:[function(e){return!!e||"登录密码必填"}],required:"",placeholder:"输入6-14个字符",counter:14,type:"password"},model:{value:e.formData.admin_pwd,callback:function(t){e.$set(e.formData,"admin_pwd",t)},expression:"formData.admin_pwd"}}),a("v-text-field",{attrs:{label:"确认密码",rules:[function(e){return!!e||"确认密码必填"}],required:"",counter:14,type:"password"},model:{value:e.formData.admin_pwd2,callback:function(t){e.$set(e.formData,"admin_pwd2",t)},expression:"formData.admin_pwd2"}}),a("v-select",{attrs:{items:e.roles,rules:[function(e){return!!e||"请选择一个角色"}],required:"",label:"选择一个角色*","item-text":"role_name","item-value":"id"},model:{value:e.formData.role_id,callback:function(t){e.$set(e.formData,"role_id",t)},expression:"formData.role_id"}}),a("v-divider"),a("v-text-field",{attrs:{label:"姓名"},model:{value:e.formData.realname,callback:function(t){e.$set(e.formData,"realname",t)},expression:"formData.realname"}}),a("v-text-field",{attrs:{label:"手机号"},model:{value:e.formData.tel_number,callback:function(t){e.$set(e.formData,"tel_number",t)},expression:"formData.tel_number"}}),a("v-btn",{attrs:{color:"dark",loading:e.loading},on:{click:function(t){return e.doEdit()}}},[e._v("确认添加")])],1)],1)],1)],1)],1)},s=[],r={props:{value:{type:Boolean,required:!0,default:!1}},data:function(){return{thisValue:this.value,loading:!1,roles:[],valid:!0,formData:{admin_name:"",admin_pwd:"",admin_pwd2:"",role_id:"",tel_number:"",realname:""}}},watch:{value:function(e){this.thisValue=e},thisValue:function(e){this.$emit("change",e)}},mounted:function(){n=this,n.getRoleData()},methods:{getRoleData:function(){this.$post("role/list",{status:1,sorts:"sort asc",currentPage:1,pageSize:100},function(e){0===e.errno&&(n.roles=e.data.data)})},doEdit:function(){this.$refs.form.validate()&&(this.formData.admin_pwd==this.formData.admin_pwd2?(this.loading=!0,this.$post("admin/add",this.formData,function(e){n.loading=!1,0==e.errno&&(n.$message({showClose:!0,message:e.errmsg,type:"success"}),n.thisValue=!1,n.$emit("changemsg",e))})):n.$message({showClose:!0,message:"密码不一致",type:"error"}))}}},i=r,o=a("6691"),u=Object(o["a"])(i,l,s,!1,null,null,null);t["default"]=u.exports},a0e0:function(e,t,a){a("dad2")&&"g"!=/./g.flags&&a("ddf7").f(RegExp.prototype,"flags",{configurable:!0,get:a("f425")})},b0a7:function(e,t,a){"use strict";a.r(t);var n,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.thisValue,callback:function(t){e.thisValue=t},expression:"thisValue"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("修改信息")])]),a("v-card-text",[a("v-container",[a("v-text-field",{attrs:{label:"姓名"},model:{value:e.thisMsg.realname,callback:function(t){e.$set(e.thisMsg,"realname",t)},expression:"thisMsg.realname"}}),a("v-text-field",{attrs:{label:"手机号"},model:{value:e.thisMsg.tel_number,callback:function(t){e.$set(e.thisMsg,"tel_number",t)},expression:"thisMsg.tel_number"}}),a("v-select",{attrs:{items:e.roles,rules:[function(e){return!!e||"请选择一个角色"}],required:"",label:"选择一个角色*","item-text":"role_name","item-value":"id"},model:{value:e.thisMsg.role_id,callback:function(t){e.$set(e.thisMsg,"role_id",t)},expression:"thisMsg.role_id"}})],1)],1),a("v-card-actions",{staticClass:"justify-space-between"},[a("v-btn",{attrs:{color:"blue gray",text:""},on:{click:function(t){e.thisValue=!1}}},[e._v("取消")]),a("v-btn",{attrs:{color:"dark darken-1",loading:e.loading,text:""},on:{click:function(t){return e.doUpdate()}}},[e._v("保存")])],1)],1)],1)},s=[],r={props:{value:{type:Boolean,required:!0,default:!1},msg:{type:Object,required:!0,default:{realname:"",tel_number:""}}},data:function(){return{thisValue:this.value,thisMsg:JSON.parse(JSON.stringify(this.msg)),loading:!1,roles:[]}},watch:{value:function(e){this.thisValue=e},thisValue:function(e){this.$emit("change",e)},msg:function(e){this.thisMsg=e}},mounted:function(){n=this,n.getRoleData()},methods:{getRoleData:function(){this.$post("role/list",{status:1,sorts:"sort asc",currentPage:1,pageSize:100},function(e){0===e.errno&&(n.roles=e.data.data)})},doUpdate:function(){this.loading=!0,this.$post("admin/updateMsg",{id:this.thisMsg.id,tel_number:this.thisMsg.tel_number,realname:this.thisMsg.realname},function(e){n.loading=!1,0==e.errno&&(n.$message({showClose:!0,message:e.errmsg,type:"success"}),n.thisValue=!1,n.$emit("changemsg",e))})}}},i=r,o=a("6691"),u=Object(o["a"])(i,l,s,!1,null,null,null);t["default"]=u.exports},c26c:function(e,t,a){"use strict";a.r(t);var n,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-text-field",{staticClass:"pr-2",attrs:{label:"登录名"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}},model:{value:e.query.admin_name,callback:function(t){e.$set(e.query,"admin_name",t)},expression:"query.admin_name"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-text-field",{staticClass:"pr-2",attrs:{label:"角色名称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}},model:{value:e.query.role_name,callback:function(t){e.$set(e.query,"role_name",t)},expression:"query.role_name"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-text-field",{staticClass:"pr-2",attrs:{label:"手机号"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}},model:{value:e.query.tel_number,callback:function(t){e.$set(e.query,"tel_number",t)},expression:"query.tel_number"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-text-field",{staticClass:"pr-2",attrs:{label:"真实姓名"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}},model:{value:e.query.realname,callback:function(t){e.$set(e.query,"realname",t)},expression:"query.realname"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-select",{attrs:{items:[{label:"全部",value:""},{label:"启用",value:1},{label:"禁用",value:0}],label:"状态","item-text":"label","item-value":"value"},on:{change:function(t){return e.getList()}},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"xs-12":"","md-12":"","lg-12":"","sm-12":""}},[a("v-btn",{attrs:{color:"gray"},on:{click:function(t){return e.resetSearch()}}},[e._v("重置")]),a("v-btn",{attrs:{color:"dark"},on:{click:function(t){return e.getList()}}},[a("v-icon",{attrs:{size:"14"}},[e._v("mdi-account-search")]),e._v(" 搜索\n      ")],1)],1)],1),a("v-divider"),a("v-layout",{attrs:{wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{sm8:"",xs12:"",md8:"",lg8:""}},[a("v-btn",{attrs:{color:"danger"},on:{click:function(t){return e.recover()}}},[e._v("删除")]),a("v-btn",{attrs:{color:"success"},on:{click:function(t){return e.statusChange(1)}}},[e._v("启用账号")]),a("v-btn",{attrs:{color:"warning"},on:{click:function(t){return e.statusChange(0)}}},[e._v("禁用账号")]),a("v-btn",{attrs:{color:"dark"},on:{click:function(t){e.dialog2=!0}}},[e._v("添加管理员")]),a("v-btn",{staticClass:"inline-block",attrs:{color:"gray",icon:""},on:{click:function(t){return e.getList()}}},[a("v-icon",[e._v("mdi-autorenew")])],1)],1),a("div",[a("v-select",{staticClass:"pr-2 inline-block",attrs:{items:e.pageSizes,"item-text":"label","item-value":"value",label:"每页条数",required:""},on:{change:function(t){return e.getList()}},model:{value:e.query.pageSize,callback:function(t){e.$set(e.query,"pageSize",t)},expression:"query.pageSize"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"xs-12":"","md-12":"","lg-12":"","sm-12":""}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoad,expression:"tableLoad"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.items,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{prop:"admin_name",label:"用户名"}}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.realname||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.tel_number||"-- -- --"))])]}}])}),a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.role_name||"-- -- --"))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[1==t.row.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white",color:"green",small:""}},[e._v("启用")]):e._e(),0==t.row.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white",color:"warning",small:""}},[e._v("禁用")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("v-btn",{attrs:{color:"dark",dark:"",small:""},on:{click:function(a){e.dialog=!0,e.tempUser=t.row}}},[e._v("修改")])],1)]}}])})],1)],1)],1),a("v-layout",{attrs:{wrap:"","justify-end":"","mt-3":""}},[a("el-pagination",{attrs:{"current-page":e.query.currentPage,"page-size":e.query.pageSize,layout:"total,  prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("update-msg",{attrs:{msg:e.tempUser},on:{change:e.updateMsgChange,changemsg:e.changeMsg},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}}),a("admin-add",{on:{change:e.addminChange,changemsg:e.changeMsg},model:{value:e.dialog2,callback:function(t){e.dialog2=t},expression:"dialog2"}})],1)},s=[],r=(a("0857"),a("b0a7")),i=a("89f1"),o={components:{updateMsg:r["default"],adminAdd:i["default"]},data:function(){return{items:[],query:{admin_name:"",role_name:"",tel_number:"",realname:"",status:"",sorts:"erd_admin.id asc",currentPage:1,pageSize:10},multipleSelection:[],pageSizes:this.$pageSizes,tableLoad:!1,total:0,dialog:!1,dialog2:!1,tempUser:{}}},mounted:function(){n=this,this.getList()},methods:{getList:function(){this.tableLoad=!0,this.$post("admin/list",this.query,function(e){n.tableLoad=!1,0===e.errno&&(n.items=e.data.data,n.total=e.data.count)})},resetSearch:function(){this.query.admin_name="",this.query.role_name="",this.query.tel_number="",this.query.realname="",this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},getIds:function(){var e=[];for(var t in this.multipleSelection)e.push(this.multipleSelection[t].id);return e},handleCurrentChange:function(e){this.query.currentPage=e,this.getList()},statusChange:function(e){this.$checkSelect(this.multipleSelection)&&this.$post("admin/status",{ids:this.getIds().toString(),status:e},function(e){0==e.errno&&(n.$message({showClose:!0,message:e.errmsg,type:"success"}),n.getList())})},recover:function(){var e=this;this.$checkSelect(this.multipleSelection)&&this.$confirm("删除否此数据将无效，可在回收站恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("admin/recover",{ids:e.getIds().toString()},function(e){0==e.errno&&(n.$message({showClose:!0,message:e.errmsg,type:"success"}),n.getList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},updateMsgChange:function(e){this.dialog=e},addminChange:function(e){this.dialog2=e},changeMsg:function(e){this.getList()}}},u=o,c=a("6691"),d=Object(c["a"])(u,l,s,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-af65b60c.83706623.js.map