(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f98e57","chunk-59d65ad1","chunk-2d0e53a5"],{"0857":function(t,e,a){"use strict";a("a0e0");var i=a("a013"),l=a("f425"),o=a("dad2"),n="toString",s=/./[n],r=function(t){a("e5ef")(RegExp.prototype,n,t,!0)};a("b6f1")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?r(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?l.call(t):void 0)}):s.name!=n&&r(function(){return s.call(this)})},"3c72":function(t,e,a){"use strict";a.r(e);var i,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.thisValue,callback:function(e){t.thisValue=e},expression:"thisValue"}},[a("v-card",[a("v-toolbar",{attrs:{id:"core-toolbar",app:"",color:"dark",prominent:""}},[a("div",{staticClass:"v-toolbar-title"},[a("v-toolbar-title",{staticClass:"white--text font-weight-light"},[t._v("新增优惠券")])],1),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.thisValue=!1}}},[a("v-icon",[t._v("el-icon-close")])],1)],1)],1),a("v-card-text",[a("v-container",[a("div",{staticStyle:{height:"60px"}}),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"优惠券名称",rules:[function(t){return!!t||"优惠券名称"}],required:"",placeholder:"输入4-12个字符",counter:12},model:{value:t.formData.coupon_name,callback:function(e){t.$set(t.formData,"coupon_name",e)},expression:"formData.coupon_name"}}),a("v-text-field",{attrs:{label:"过期天数(天)",rules:[function(t){return!!t||"过期天数必填"}],required:"",placeholder:"用户领取后生效",type:"number"},model:{value:t.formData.deadline_days,callback:function(e){t.$set(t.formData,"deadline_days",e)},expression:"formData.deadline_days"}}),a("v-text-field",{attrs:{label:"优惠金额(元)",rules:[function(t){return!!t||"优惠金额必填"}],required:"",type:"number"},model:{value:t.formData.discount_amount,callback:function(e){t.$set(t.formData,"discount_amount",e)},expression:"formData.discount_amount"}}),a("v-text-field",{attrs:{label:"满足最低消费(元)",type:"number"},model:{value:t.formData.conditions_amount,callback:function(e){t.$set(t.formData,"conditions_amount",e)},expression:"formData.conditions_amount"}}),a("p",{staticClass:"mt-4"},[t._v("服务类型限制")]),a("v-radio-group",{attrs:{mandatory:!1,row:""},model:{value:t.formData.limit_service,callback:function(e){t.$set(t.formData,"limit_service",e)},expression:"formData.limit_service"}},[a("v-radio",{attrs:{label:"限制服务",value:1}}),a("v-radio",{attrs:{label:"不限制服务",value:0}})],1),a("el-checkbox-group",{model:{value:t.formData.condition_service,callback:function(e){t.$set(t.formData,"condition_service",e)},expression:"formData.condition_service"}},[a("el-checkbox",{attrs:{label:"帮我送",disabled:0==t.formData.limit_service}}),a("el-checkbox",{attrs:{label:"帮我取",disabled:0==t.formData.limit_service}}),a("el-checkbox",{attrs:{label:"帮我买",disabled:0==t.formData.limit_service}}),a("el-checkbox",{attrs:{label:"代驾",disabled:0==t.formData.limit_service}})],1),a("v-text-field",{staticClass:"mt-4",attrs:{label:"发放数量限制(填-1表示不限制)",type:"number"},model:{value:t.formData.limit_no,callback:function(e){t.$set(t.formData,"limit_no",e)},expression:"formData.limit_no"}}),a("p",{staticClass:"mt-4"},[t._v("优惠券状态")]),a("v-radio-group",{attrs:{mandatory:!1,row:""},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("v-radio",{attrs:{label:"开启优惠券",value:1}}),a("v-radio",{attrs:{label:"不可领取",value:2}}),a("v-radio",{attrs:{label:"停用优惠券",value:3}})],1),a("v-btn",{attrs:{color:"dark",loading:t.loading},on:{click:function(e){return t.doEdit()}}},[t._v("确认添加")])],1)],1)],1)],1)],1)},o=[],n=(a("0857"),{props:{value:{type:Boolean,required:!0,default:!1}},data:function(){return{thisValue:this.value,loading:!1,roles:[],valid:!0,formData:{coupon_name:"",deadline_days:"",discount_amount:"",conditions_amount:0,condition_service:[],status:1,limit_no:"",limit_service:0}}},watch:{value:function(t){this.thisValue=t},thisValue:function(t){this.$emit("change",t)}},mounted:function(){i=this},methods:{doEdit:function(){if(this.$refs.form.validate()){this.loading=!0;var t=JSON.parse(JSON.stringify(this.formData));t.condition_service=t.condition_service.toString(),this.$post("coupon/add",t,function(t){i.loading=!1,0==t.errno&&(i.$message({showClose:!0,message:t.errmsg,type:"success"}),i.thisValue=!1,i.$emit("changemsg",t))})}}}}),s=n,r=a("6691"),c=Object(r["a"])(s,l,o,!1,null,null,null);e["default"]=c.exports},"941e":function(t,e,a){"use strict";a.r(e);var i,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.thisValue,callback:function(e){t.thisValue=e},expression:"thisValue"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("修改信息")])]),a("v-card-text",[a("v-container",[a("v-text-field",{staticClass:"mt-4",attrs:{label:"发放数量限制(填-1表示不限制)",type:"number"},model:{value:t.thisMsg.limit_no,callback:function(e){t.$set(t.thisMsg,"limit_no",e)},expression:"thisMsg.limit_no"}}),a("p",{staticClass:"mt-4"},[t._v("优惠券状态")]),a("v-radio-group",{attrs:{mandatory:!1,row:""},model:{value:t.thisMsg.status,callback:function(e){t.$set(t.thisMsg,"status",e)},expression:"thisMsg.status"}},[a("v-radio",{attrs:{label:"开启优惠券",value:1}}),a("v-radio",{attrs:{label:"不可领取",value:2}}),a("v-radio",{attrs:{label:"停用优惠券",value:3}})],1)],1)],1),a("v-card-actions",{staticClass:"justify-space-between"},[a("v-btn",{attrs:{color:"blue gray",text:""},on:{click:function(e){t.thisValue=!1}}},[t._v("取消")]),a("v-btn",{attrs:{color:"dark darken-1",loading:t.loading,text:""},on:{click:function(e){return t.doUpdate()}}},[t._v("保存")])],1)],1)],1)},o=[],n={props:{value:{type:Boolean,required:!0,default:!1},msg:{type:Object,required:!0,default:{status:"",limit_no:""}}},data:function(){return{thisValue:this.value,thisMsg:JSON.parse(JSON.stringify(this.msg)),loading:!1,roles:[]}},watch:{value:function(t){this.thisValue=t},thisValue:function(t){this.$emit("change",t)},msg:function(t){this.thisMsg=JSON.parse(JSON.stringify(t))}},mounted:function(){i=this},methods:{doUpdate:function(){this.loading=!0,this.$post("coupon/update",{id:this.thisMsg.id,status:this.thisMsg.status,limit_no:this.thisMsg.limit_no},function(t){i.loading=!1,0==t.errno&&(i.$message({showClose:!0,message:t.errmsg,type:"success"}),i.thisValue=!1,i.$emit("changemsg",t))})}}},s=n,r=a("6691"),c=Object(r["a"])(s,l,o,!1,null,null,null);e["default"]=c.exports},a0e0:function(t,e,a){a("dad2")&&"g"!=/./g.flags&&a("ddf7").f(RegExp.prototype,"flags",{configurable:!0,get:a("f425")})},bfaf:function(t,e,a){"use strict";a.r(e);var i,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-text-field",{staticClass:"pr-2",attrs:{label:"优惠券名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList()}},model:{value:t.query.coupon_name,callback:function(e){t.$set(t.query,"coupon_name",e)},expression:"query.coupon_name"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-select",{attrs:{items:[{label:"全部",value:""},{label:"可领取",value:1},{label:"停止领取",value:2},{label:"停用优惠券",value:3}],label:"状态","item-text":"label","item-value":"value"},on:{change:function(e){return t.getList()}},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}})],1),a("v-flex",{attrs:{md3:"",lg2:""}},[a("v-select",{attrs:{items:[{label:"全部",value:""},{label:"不限制服务",value:0},{label:"限制服务",value:1}],label:"状态","item-text":"label","item-value":"value"},on:{change:function(e){return t.getList()}},model:{value:t.query.limit_service,callback:function(e){t.$set(t.query,"limit_service",e)},expression:"query.limit_service"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"xs-12":"","md-12":"","lg-12":"","sm-12":""}},[a("v-btn",{attrs:{color:"gray"},on:{click:function(e){return t.resetSearch()}}},[t._v("重置")]),a("v-btn",{attrs:{color:"dark"},on:{click:function(e){return t.getList()}}},[a("v-icon",{attrs:{size:"14"}},[t._v("mdi-account-search")]),t._v(" 搜索\n      ")],1)],1)],1),a("v-divider"),a("v-layout",{attrs:{wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{sm8:"",xs12:"",md8:"",lg8:""}},[a("v-btn",{attrs:{color:"red"},on:{click:function(e){return t.recover()}}},[t._v("删除")]),a("v-btn",{attrs:{color:"dark"},on:{click:function(e){t.dialog2=!0}}},[t._v("添加优惠券")]),a("v-btn",{staticClass:"inline-block",attrs:{color:"gray",icon:""},on:{click:function(e){return t.getList()}}},[a("v-icon",[t._v("mdi-autorenew")])],1)],1),a("div",[a("v-select",{staticClass:"pr-2 inline-block",attrs:{items:t.pageSizes,"item-text":"label","item-value":"value",label:"每页条数",required:""},on:{change:function(e){return t.getList()}},model:{value:t.query.pageSize,callback:function(e){t.$set(t.query,"pageSize",e)},expression:"query.pageSize"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"xs-12":"","md-12":"","lg-12":"","sm-12":""}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoad,expression:"tableLoad"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.items,"tooltip-effect":"dark",border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"70"}}),a("el-table-column",{attrs:{label:"优惠券名称",prop:"coupon_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.coupon_name))]),a("div",[t._v(t._s(e.row.create_time))])]}}])}),a("el-table-column",{attrs:{label:"优惠金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.discount_amount)+"元")])]}}])}),a("el-table-column",{attrs:{label:"最低消费"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.conditions_amount)+"元")])]}}])}),a("el-table-column",{attrs:{label:"有效天数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.deadline_days)+"天")])]}}])}),a("el-table-column",{attrs:{label:"领取数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(-1==e.row.limit_no?"不限制":e.row.limit_no+"次"))])]}}])}),a("el-table-column",{attrs:{label:"使用人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.cumulative_use_no)+"人")])]}}])}),a("el-table-column",{attrs:{label:"领取人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.cumulative_draw_no)+"人")])]}}])}),a("el-table-column",{attrs:{label:"使用限制"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(0==e.row.limit_service?"不限制":e.row.condition_service))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[1==e.row.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white",color:"green",small:""}},[t._v("可领取")]):t._e(),2==e.row.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white",color:"warning",small:""}},[t._v("停止领取")]):t._e(),3==e.row.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white",color:"red",small:""}},[t._v("停止使用")]):t._e()],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("v-menu",{attrs:{"offset-y":"","content-class":"dropdown-menu",transition:"slide-y-transition"}},[a("v-btn",{attrs:{slot:"activator",small:"",color:"success"},slot:"activator"},[t._v("\n                  展开操作\n                ")]),a("v-card",[a("v-list",{attrs:{dense:""}},[a("v-list-tile",{on:{click:function(a){t.tempAgent=e.row,t.dialog=!0}}},[a("v-list-tile-title",{domProps:{textContent:t._s("查看领取记录")}})],1),a("v-list-tile",{on:{click:function(a){t.tempAgent=e.row,t.dialog=!0}}},[a("v-list-tile-title",{domProps:{textContent:t._s("修改")}})],1)],1)],1)],1)],1)]}}])})],1)],1)],1),a("v-layout",{attrs:{wrap:"","justify-end":"","mt-3":""}},[a("el-pagination",{attrs:{"current-page":t.query.currentPage,"page-size":t.query.pageSize,layout:"total,  prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),a("coupon-update",{attrs:{msg:t.tempAgent},on:{change:t.updateMsgChange,changemsg:t.changeMsg},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}}),a("coupon-add",{on:{change:t.addminChange,changemsg:t.changeMsg},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}})],1)},o=[],n=(a("0857"),a("3c72")),s=a("941e"),r={components:{couponAdd:n["default"],couponUpdate:s["default"]},data:function(){return{items:[],query:{coupon_name:"",status:"",limit_service:"",currentPage:1,pageSize:10},multipleSelection:[],pageSizes:this.$pageSizes,tableLoad:!1,total:0,dialog:!1,dialog2:!1,tempAgent:{}}},mounted:function(){i=this,this.getList()},methods:{getList:function(){this.tableLoad=!0,this.$post("coupon/list",this.query,function(t){i.tableLoad=!1,0===t.errno&&(i.items=t.data.data,i.total=t.data.count)})},resetSearch:function(){this.query.coupon_name="",this.query.status="",this.query.limit_service="",this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},getIds:function(){var t=[];for(var e in this.multipleSelection)t.push(this.multipleSelection[e].id);return t},handleCurrentChange:function(t){this.query.currentPage=t,this.getList()},recover:function(){var t=this;this.$checkSelect(this.multipleSelection)&&this.$confirm("删除否此数据将无效，可在回收站恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$post("coupon/recover",{ids:t.getIds().toString()},function(t){0==t.errno&&(i.$message({showClose:!0,message:t.errmsg,type:"success"}),i.getList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},updateMsgChange:function(t){this.dialog=t},addminChange:function(t){this.dialog2=t},changeMsg:function(t){this.getList()}}},c=r,u=a("6691"),d=Object(u["a"])(c,l,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-70f98e57.5886e0d7.js.map